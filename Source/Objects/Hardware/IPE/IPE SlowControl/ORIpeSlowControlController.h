//--------------------------------------------------------
// ORIpeSlowControlController
// Created by Mark  A. Howe on Mon Apr 11 2005
// Code partially generated by the OrcaCodeWizard. Written by Mark A. Howe.
// Copyright (c) 2005 CENPA, University of Washington. All rights reserved.
//-----------------------------------------------------------
//This program was prepared for the Regents of the University of 
//Washington at the Center for Experimental Nuclear Physics and 
//Astrophysics (CENPA) sponsored in part by the United States 
//Department of Energy (DOE) under Grant #DE-FG02-97ER41020. 
//The University has certain rights in the program pursuant to 
//the contract and the program should not be copied or distributed 
//outside your organization.  The DOE and the University of 
//Washington reserve all rights in the program. Neither the authors,
//University of Washington, or U.S. Government make any warranty, 
//express or implied, or assume any liability or responsibility 
//for the use of this software.
//-------------------------------------------------------------

@class WebView;

@interface ORIpeSlowControlController : OrcaObjectController
{
    //all obsolete -tb-
	IBOutlet NSTextField*   remotePortField;
	IBOutlet NSTextField*   remoteHostField;
	IBOutlet NSTextField*   connectionStatusField;
	IBOutlet NSTextField*   byteRecievedField;
	IBOutlet NSButton*      connectButton;
    IBOutlet NSButton*      lockButton;
	IBOutlet NSButton*      connectAtStartButton;
	IBOutlet NSButton*      autoReconnectButton;
    
    
    //slow control - obsolete -tb-
	IBOutlet NSTextField*   monitoringField;
	IBOutlet NSTextField*   monitoringIntValueField;
    
    //slow control - new -tb-
    IBOutlet NSOutlineView *sensorTreeOutlineView;
    
    // Main Dialog
    IBOutlet NSTableView  *sensorTableView; // the channel/sensor list view
    //tab view
    IBOutlet NSTabView   *ipeSlowControlTabView;
    //general settings tab
    IBOutlet NSTextField *adeiBaseUrlField;
    IBOutlet NSComboBox  *adeiSetupOptionsComboBox;
    //IBOutlet NSComboBox  *adeiSetupOptionsComboBox;
    IBOutlet NSTextField *adeiServiceUrlField;
    IBOutlet NSTableView *adeiSetupOptionsTableView; // the setup options list view
	IBOutlet NSButton    *addAdeiSetupOptionButton;
	IBOutlet NSButton    *removeAdeiSetupOptionButton;// button text changed to "Delete"
    IBOutlet NSScrollView *textView; //super class of a text view is NSText -tb-
                                     //[textView documentView] is a NSTextView -tb-
    //sensor settings tab
    IBOutlet NSTextField *sensorNumField;
    IBOutlet NSTextField *sensorAdeiBaseUrlField;
    IBOutlet NSTextField *sensorAdeiServiceUrlField;
    IBOutlet NSTextField *sensorPathField;
    IBOutlet NSTextField *minValueField;
    IBOutlet NSTextField *maxValueField;
    IBOutlet NSTextField *lowAlarmRangeField;
    IBOutlet NSTextField *highAlarmRangeField;
	IBOutlet NSButton    *isRecordingDataButton;
                                     
                                     
    // Drawers
    IBOutlet NSDrawer *leftDrawer;
	IBOutlet NSButton *requestAdeiSensorTreeButton;
	IBOutlet NSProgressIndicator *requestAdeiSensorTreeProgressIndicator;
	IBOutlet NSButton *clearAdeiSensorTreeButton;
    IBOutlet NSDrawer *rightDrawer;
    //IBOutlet id  *adeiWebInterfaceWebView;
    IBOutlet WebView  *adeiWebInterfaceWebView;

    
}

#pragma mark ***Initialization
- (id) init;
- (void) dealloc;
- (void) awakeFromNib;

#pragma mark ***Notifications
- (void) registerNotificationObservers;
- (void) updateWindow;
- (void) updateSensorSettings;
#if 0 //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
- (void) remotePortChanged:(NSNotification*)note;
- (void) remoteHostChanged:(NSNotification*)note;
- (void) isConnectedChanged:(NSNotification*)note;
- (void) byteCountChanged:(NSNotification*)note;
- (void) connectAtStartChanged:(NSNotification*)note;
- (void) autoReconnectChanged:(NSNotification*)note;
#endif  //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
- (void) lockChanged:(NSNotification*)aNotification;

//slow control

//general settings tab
- (void) adeiBaseUrlChanged:(NSNotification*)aNote;
- (void) adeiServiceUrlChanged:(NSNotification*)aNote;
- (void) adeiSetupOptionsChanged:(NSNotification*)aNote;
- (void) adeiTreeChanged:(NSNotification*)aNote;
- (void) requestingAdeiTreeStarted:(NSNotification*)aNote;
- (void) requestingAdeiTreeStopped:(NSNotification*)aNote;

- (void) sensorListChanged:(NSNotification*)aNote;

//sensor setting notifications
- (void) selectedSensorNumChanged:(NSNotification*)aNote;
- (void) dataChanged:(NSNotification*)aNote;
- (void) adeiBaseUrlForSensorChanged:(NSNotification*)aNote;
- (void) minValueChanged:(NSNotification*)aNote;
- (void) maxValueChanged:(NSNotification*)aNote;
- (void) lowAlarmRangeChanged:(NSNotification*)aNote;
- (void) highAlarmRangeChanged:(NSNotification*)aNote;
- (void) isRecordingDataChanged:(NSNotification*)aNote;

// slow control -tb-
- (void) monitoringFieldChanged:(NSNotification*)aNotification;

#pragma mark ***Accessors

#pragma mark ***Actions
- (IBAction) lockAction:(id)sender;

//new -tb-
//- (IBAction) loadButtonAction:(id)sender;  OBSOLETE -tb-
//- (IBAction) loadCSVFileButtonAction:(id)sender; OBSOLETE -tb-
- (IBAction) adeiBaseUrlFieldAction:(id)sender;
- (IBAction) addAdeiSetupOptionAction:(id)sender;
- (IBAction) removeAdeiSetupOptionAction:(id)sender;
- (IBAction) requestSensorTreeButtonAction:(id)sender;
- (IBAction) sensorlistButtonAction:(id)sender;
- (IBAction) dumpSensorlistButtonAction:(id)sender;
//sensor settings actions
- (IBAction) adeiBaseUrlForSensorAction:(id)sender;
- (IBAction) minValueChangedAction:(id)sender;
- (IBAction) maxValueChangedAction:(id)sender;
- (IBAction) lowAlarmRangeChangedAction:(id)sender;
- (IBAction) highAlarmRangeChangedAction:(id)sender;
- (IBAction) isRecordingDataChangedAction:(id)sender;
//drawer actions
- (IBAction)openLeftDrawer:(id)sender;
- (IBAction)closeLeftDrawer:(id)sender;
- (IBAction)toggleLeftDrawer:(id)sender;
- (IBAction)openRightDrawer:(id)sender;
- (IBAction)closeRightDrawer:(id)sender;
- (IBAction)toggleRightDrawer:(id)sender;

//list view context menu
- (IBAction)sensorListContextMenuAction:(id)sender;
- (IBAction)sensorListContextMenuLoadValueAction:(id)sender;
- (IBAction)sensorListContextMenuEditAction:(id)sender;
- (IBAction)sensorListContextMenuRemoveAction:(id)sender;
- (IBAction)sensorListContextMenuDisplayWebViewAction:(id)sender;//web view


- (IBAction)loadAdeiHomeInWebInterfaceWebViewAction:(id)sender;//web view



#pragma mark •••Data Source Methods (OutlineView)
- (id) outlineView:(NSOutlineView *)outlineView child:(int)index ofItem:(id)item;
- (BOOL) outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item;
- (int) outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item;
- (id) outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item;
- (void)outlineView:(NSOutlineView *)outlineView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn byItem:(id)item;


#pragma mark •••Data Source Methods (TableView)
- (int)numberOfRowsInTableView:(NSTableView *)tableView;
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(int)row;
- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row;
//cloned Data Source Methods (TableView) for adeiSetupOptionsTableView
- (int)numberOfRowsInAdeiSetupOptionsTableView:(NSTableView *)tableView;
- (id)adeiSetupOptionsTableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(int)row;
- (void)adeiSetupOptionsTableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row;


/* Optional - Editing Support
- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row;
*/

@end

